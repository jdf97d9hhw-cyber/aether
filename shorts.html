<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <title>Aether | Instantes</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="Instantes de sesiones en directo de DJ Aether. Deep, Soulful House desde Barcelona." />
    <meta name="keywords" content="DJ Aether, shorts, vídeos, sesiones, Deep House, Barcelona" />
    <meta name="author" content="Aether" />
    <meta name="robots" content="index, follow" />

    <!-- Open Graph -->
    <meta property="og:title" content="Aether | Instantes" />
    <meta property="og:description" content="Instantes de sesiones en directo de DJ Aether" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://aether.com/img/og-cover-1200x630.png" />
    <meta property="og:url" content="https://aether.com/shorts.html" />

    <link rel="canonical" href="https://aether.com/shorts.html" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Aether | Instantes" />
    <meta name="twitter:description" content="Instantes de sesiones en directo de DJ Aether" />
    <meta name="twitter:image" content="https://aether.com/img/og-cover-1200x630.png" />

    <!-- Favicons (orden: PNG pequeño primero para Safari en pestaña) -->
    <link rel="shortcut icon" href="img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="192x192" href="img/icon-192x192.png" />
    <link rel="icon" type="image/png" sizes="512x512" href="img/icon-512x512.png" />
    <link rel="icon" type="image/svg+xml" href="img/logo-icon.svg" />
    <link rel="apple-touch-icon" sizes="180x180" href="img/icon-180x180.png">

    <!-- Theme (tono cálido como el resto de la web) -->
    <meta name="theme-color" content="#0a0806" />
    <meta name="msapplication-TileColor" content="#0a0806" />

    <!-- PWA -->
    <link rel="manifest" href="/site.webmanifest" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Aether" />

    <!-- Performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="dns-prefetch" href="https://cdn.tailwindcss.com" />
    <link rel="dns-prefetch" href="https://unpkg.com" />

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@0.460.0"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;1,400&family=Inter:wght@300;400;500&display=swap"
        rel="stylesheet" />

    <style>
        /* 1. FONDO Y CALIDEZ (mismo lenguaje que index) */
        html {
            background: linear-gradient(180deg, #0c0a07 0%, #0a0806 25%, #0b0906 50%, #0a0806 75%, #0c0a07 100%);
            height: 100%;
            overflow: hidden;
        }

        body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(180deg, #0c0a07 0%, #0a0806 25%, #0b0906 50%, #0a0806 75%, #0c0a07 100%);
            position: fixed;
            overflow: hidden;
            overscroll-behavior: none;
            touch-action: none;
        }

        /* Calidez en toda la página (como index) */
        #warm-overlay {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 1;
            background:
                radial-gradient(circle at 30% 20%, rgba(255, 160, 80, 0.06), transparent 55%),
                radial-gradient(circle at 70% 80%, rgba(220, 150, 70, 0.04), transparent 50%),
                linear-gradient(to bottom, rgba(255, 200, 120, 0.03) 0%, rgba(255, 180, 100, 0.035) 50%, rgba(220, 160, 80, 0.04) 100%);
            mix-blend-mode: screen;
            opacity: 0.22;
        }

        /* Fondo ambiental fijo (Detrás de todo) */
        #static-background {
            position: fixed;
            inset: 0;
            background-image: url('img/bg_converted.webp');
            background-size: cover;
            background-position: center;
            opacity: 0.15;
            filter: blur(40px);
            z-index: 0;
            pointer-events: none;
            animation: backgroundPulse 20s ease-in-out infinite;
        }

        @keyframes backgroundPulse {
            0%, 100% { opacity: 0.15; transform: scale(1); }
            50% { opacity: 0.2; transform: scale(1.02); }
        }

        /* 2. EL ESCENARIO (Centra el contenedor de videos) */
        #stage-wrapper {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10;
        }

        /* Botones tipo cristal cálido (versión más sutil para Shorts) */
        .mute-toggle, .shorts-glass-btn,
        a[href="index.html"].fixed.rounded-full {
            background: rgba(0, 0, 0, 0.26) !important;
            border-color: rgba(255, 235, 210, 0.14) !important;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.28), 0 1px 0 0 rgba(255, 220, 190, 0.03) inset !important;
            opacity: 0.86;
        }

        .mute-toggle:hover, .shorts-glass-btn:hover,
        a[href="index.html"].fixed.rounded-full:hover {
            background: rgba(0, 0, 0, 0.34) !important;
            border-color: rgba(255, 235, 210, 0.22) !important;
            box-shadow: 0 0 12px rgba(204, 136, 0, 0.11), 0 1px 0 0 rgba(255, 220, 190, 0.04) inset !important;
            opacity: 0.93;
        }

        .mute-toggle:active,
        a[href="index.html"].fixed.rounded-full:active {
            transform: scale(0.97) !important;
        }

        .mute-toggle i,
        .mute-toggle svg {
            transform: none !important;
        }

        .mute-toggle:hover i,
        .mute-toggle:hover svg {
            opacity: 0.95;
        }

        /* 3. EL CONTENEDOR DE SCROLL (LA COLUMNA CENTRAL) */
        /* Este es el ÚNICO elemento que se mueve */
        #shorts-scroller {
            width: 100%;
            height: 100%;
            overflow-y: scroll;
            overflow-x: hidden;
            scroll-snap-type: y mandatory;
            scroll-behavior: smooth;
            touch-action: pan-y;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        #shorts-scroller::-webkit-scrollbar {
            display: none;
        }

        /* 4. AJUSTES PARA PC: scroll vertical + bordes redondos */
        @media (min-width: 768px) {
            #shorts-scroller {
                width: 450px;
                height: 90vh;
                border-radius: 24px;
                overflow-x: hidden;
                overflow-y: scroll;
                box-shadow:
                    0 0 60px rgba(0, 0, 0, 0.8),
                    0 0 0 1px rgba(255, 235, 210, 0.06),
                    0 1px 0 0 rgba(255, 220, 190, 0.04) inset,
                    inset 0 0 40px rgba(204, 136, 0, 0.04);
                border: 1px solid rgba(255, 235, 210, 0.1);
                background: #000;
                transition: box-shadow 0.3s ease;
            }

            #shorts-scroller:hover {
                box-shadow:
                    0 0 80px rgba(0, 0, 0, 0.9),
                    0 0 0 1px rgba(204, 136, 0, 0.18),
                    0 1px 0 0 rgba(255, 220, 190, 0.06) inset,
                    inset 0 0 60px rgba(204, 136, 0, 0.06);
            }
        }

        /* 5. CADA VIDEO */
        .video-section {
            width: 100%;
            height: 100%;
            position: relative;
            scroll-snap-align: start;
            scroll-snap-stop: always;
            background: #000;
            overflow: hidden;
            border-radius: 0;
            transition: opacity 0.4s ease;
        }

        @media (min-width: 768px) {
            .video-section {
                border-radius: 24px;
            }
            .video-section::after {
                border-radius: 24px;
            }
        }

        .video-section::before {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at center, rgba(204, 136, 0, 0.05) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.5s ease;
            z-index: 1;
            pointer-events: none;
        }

        .video-section:has(video:not([paused]))::before {
            opacity: 1;
        }

        video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: filter 0.4s cubic-bezier(0.4, 0, 0.2, 1), transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            will-change: filter, transform;
        }

        .video-section:has(video:not([paused])) video {
            filter: brightness(1.05) contrast(1.02) saturate(1.05);
        }

        /* Плавное появление видео */
        video[src] {
            animation: videoFadeIn 0.6s ease-out;
        }

        @keyframes videoFadeIn {
            from {
                opacity: 0;
                transform: scale(1.02);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Ocultar controles nativos (barra de tiempo, etc.) */
        video::-webkit-media-controls {
            display: none !important;
        }

        /* --- NUEVO: Ocultar el botón de Play fantasma del centro --- */
        video::-webkit-media-controls-start-playback-button,
        video::-webkit-media-controls-overlay-play-button {
            display: none !important;
            -webkit-appearance: none;
            opacity: 0;
        }

        /* Efecto de brillo sutil en los bordes del video */
        .video-section::after {
            content: '';
            position: absolute;
            inset: 0;
            border: 1px solid transparent;
            border-radius: 0;
            pointer-events: none;
            z-index: 2;
            opacity: 0;
            transition: opacity 0.5s ease;
            box-shadow: inset 0 0 60px rgba(204, 136, 0, 0.1);
        }

        .video-section:has(video:not([paused]))::after {
            opacity: 1;
        }

        /* Botón play/pause — forzar círculo perfecto */
        .play-overlay > div {
            width: 4.5rem;
            height: 4.5rem;
            min-width: 4.5rem;
            min-height: 4.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .play-overlay > div > div {
            border-radius: 50%;
        }

        /* Indicador de swipe hacia arriba/abajo */
        .swipe-indicator {
            position: absolute;
            left: 50%;
            bottom: 18%;
            transform: translate(-50%, 0);
            animation: swipe-bounce 1.8s cubic-bezier(0.4, 0, 0.2, 1) infinite;
            transition: opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1), transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 30;
        }

        @media (min-width: 768px) {
            .swipe-indicator {
                bottom: 20%;
            }
        }

        .swipe-indicator > div {
            backdrop-filter: blur(12px);
            background: rgba(22, 18, 14, 0.65);
            border: 1px solid rgba(255, 235, 210, 0.12);
            box-shadow:
                0 4px 20px rgba(0, 0, 0, 0.4),
                0 0 0 1px rgba(204, 136, 0, 0.1),
                0 1px 0 0 rgba(255, 220, 190, 0.04) inset;
        }

        @keyframes swipe-bounce {
            0% {
                transform: translate(-50%, 0);
                opacity: 0.5;
            }

            50% {
                transform: translate(-50%, 10px);
                opacity: 1;
            }

            100% {
                transform: translate(-50%, 0);
                opacity: 0.5;
            }
        }

        /* Botón like — arriba de todos */
        .video-section .like-btn {
            position: absolute;
            bottom: calc(2.5rem + 5rem);
            right: 1.5rem;
            left: auto;
            top: auto;
            z-index: 30;
            cursor: pointer;
            outline: none;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            padding: 6px 10px;
            background: rgba(8, 8, 8, 0.18);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 182, 193, 0.155);
            border-radius: 999px;
            opacity: 0.5;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.55);
            transition: opacity 0.22s ease, transform 0.22s ease, border-color 0.22s ease, background 0.22s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 52px;
            gap: 0.35rem;
            pointer-events: auto;
            font-size: 0.6875rem;
            font-weight: 500;
        }

        @media (min-width: 769px) {
            .video-section .like-btn {
                bottom: calc(2.5rem + 5rem);
                right: 1.5rem;
                padding: 6px 10px;
            }
        }

        @media (hover: hover) {
            .video-section .like-btn:hover {
                opacity: 0.75;
                transform: translateY(-0.5px);
                border-color: rgba(255, 182, 193, 0.5);
                background: rgba(8, 8, 8, 0.24);
            }
        }

        .video-section .like-btn:active {
            transform: scale(0.96);
        }

        .video-section .like-btn .like-icon {
            width: 11px;
            height: 11px;
            flex-shrink: 0;
            transition: transform 0.25s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            stroke: rgba(255, 255, 255, 0.65);
            fill: none;
            stroke-width: 1.8;
        }

        .video-section .like-btn.liked .like-icon {
            fill: rgba(255, 255, 255, 0.82);
            stroke: rgba(255, 255, 255, 0.82);
        }

        .video-section .like-btn .like-count {
            font-size: 0.6875rem;
            line-height: 1;
            color: rgba(255, 255, 255, 0.78);
            font-weight: 500;
            font-variant-numeric: tabular-nums;
        }

        @media (min-width: 768px) {
            .video-section .like-btn .like-icon {
                width: 11px;
                height: 11px;
            }
        }

        .video-section .like-btn.animating .like-icon {
            animation: likePulse 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .video-section .like-btn:disabled {
            cursor: default;
            opacity: 0.6;
        }

        .video-section .like-btn.liked {
            opacity: 0.6;
        }

        .video-section .like-btn.liked .like-icon {
            fill: rgba(255, 255, 255, 0.82);
            stroke: rgba(255, 255, 255, 0.82);
        }

        .video-section .like-btn.animating i {
            animation: likePulse 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes likePulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.3) rotate(10deg);
            }
            100% {
                transform: scale(1);
            }
        }

        /* Анимация появления заголовка и подписи */
        .video-info {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.3s,
                        transform 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.3s;
        }

        .video-section:has(video:not([paused])) .video-info {
            opacity: 1;
            transform: translateY(0);
        }

        .video-title {
            opacity: 0;
            transform: translateY(15px);
            transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.5s,
                        transform 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.5s;
        }

        .video-section:has(video:not([paused])) .video-title {
            opacity: 1;
            transform: translateY(0);
        }

        .video-subtitle {
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.7s,
                        transform 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.7s;
        }

        .video-section:has(video:not([paused])) .video-subtitle {
            opacity: 1;
            transform: translateY(0);
        }

        /* Botón suscribirse — abajo de todo */
        .video-section .subscribe-btn {
            position: absolute;
            bottom: 1.5rem;
            right: 1.5rem;
            left: auto;
            top: auto;
            z-index: 30;
            cursor: pointer;
            outline: none;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            padding: 6px 14px;
            width: 108px;
            background: rgba(8, 8, 8, 0.18);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.16);
            border-radius: 999px;
            opacity: 0.5;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.55);
            transition: opacity 0.22s ease, transform 0.22s ease, border-color 0.22s ease, background 0.22s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.35rem;
            pointer-events: auto;
            font-size: 0.6875rem;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.65);
            text-decoration: none;
        }

        @media (hover: hover) {
            .video-section .subscribe-btn:hover {
                opacity: 0.75;
                transform: translateY(-0.5px);
                border-color: rgba(255, 255, 255, 0.24);
                background: rgba(8, 8, 8, 0.24);
                color: rgba(255, 255, 255, 0.85);
            }
        }

        .video-section .subscribe-btn:active {
            transform: scale(0.96);
        }

        .video-section .subscribe-btn i {
            width: 11px;
            height: 11px;
            flex-shrink: 0;
        }

        .video-section .subscribe-btn span {
            font-size: 0.6875rem;
            line-height: 1;
        }

        @media (min-width: 768px) {
            .video-section .subscribe-btn {
                bottom: 1.5rem;
                right: 1.5rem;
                padding: 6px 14px;
                font-size: 0.6875rem;
            }
            .video-section .subscribe-btn i {
                width: 11px;
                height: 11px;
            }
            .video-section .subscribe-btn span {
                font-size: 0.6875rem;
            }
        }

        /* Блок комментариев: panel alto, header y formulario fijos, lista con mucho espacio para scroll */
        .comments-section {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            max-height: 78vh;
            min-height: 320px;
            display: flex;
            flex-direction: column;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.95) 0%, rgba(0, 0, 0, 0.85) 50%, transparent 100%);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 1.25rem 1.5rem 1.5rem;
            z-index: 100;
            pointer-events: auto;
            opacity: 0;
            transform: translateY(100%);
            transition: opacity 0.4s ease, transform 0.4s ease;
        }

        /* Zona de blur debajo del panel (borde inferior) */
        .comments-section::before {
            content: '';
            position: absolute;
            left: 0;
            right: 0;
            bottom: 0;
            height: 80px;
            transform: translateY(100%);
            background: linear-gradient(to top, rgba(0, 0, 0, 0.75) 0%, transparent 100%);
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
            pointer-events: none;
            z-index: -1;
        }

        .comments-header {
            flex-shrink: 0;
        }

        .comments-list {
            flex: 1;
            min-height: 220px;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: rgba(255, 255, 255, 0.2) transparent;
        }

        .comments-list::-webkit-scrollbar {
            width: 4px;
        }

        .comments-list::-webkit-scrollbar-track {
            background: transparent;
        }

        .comments-list::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
        }

        .comment-form {
            flex-shrink: 0;
        }

        .comments-section.show {
            opacity: 1;
            transform: translateY(0);
        }

        .comments-toggle {
            position: absolute;
            bottom: calc(2.5rem + 2.5rem);
            right: 1.5rem;
            z-index: 30;
            cursor: pointer;
            outline: none;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            padding: 6px 10px;
            background: rgba(8, 8, 8, 0.18);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 182, 193, 0.155);
            border-radius: 999px;
            opacity: 0.5;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.55);
            transition: opacity 0.22s ease, transform 0.22s ease, border-color 0.22s ease, background 0.22s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 52px;
            gap: 0.35rem;
            pointer-events: auto;
            font-size: 0.6875rem;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.78);
        }

        .comments-toggle:active {
            transform: scale(0.96);
        }

        @media (hover: hover) {
            .comments-toggle:hover {
                opacity: 0.75;
                transform: translateY(-0.5px);
                border-color: rgba(255, 182, 193, 0.5);
                background: rgba(8, 8, 8, 0.24);
            }
        }

        .comments-toggle i,
        .comments-toggle svg,
        .comments-toggle .comments-icon {
            width: 11px !important;
            height: 11px !important;
            min-width: 11px;
            min-height: 11px;
            flex-shrink: 0;
        }

        .comments-toggle .comment-count {
            font-size: 0.6875rem;
            line-height: 1;
            font-weight: 500;
            font-variant-numeric: tabular-nums;
        }

        .comments-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .comments-title {
            font-size: 0.875rem;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.9);
            letter-spacing: 0.02em;
        }

        .comments-close {
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0.85;
            transition: opacity 0.2s ease;
            color: rgba(255, 255, 255, 0.9);
        }

        .comments-close:hover {
            opacity: 1;
            color: rgba(255, 255, 255, 1);
        }

        .comments-close i,
        .comments-close svg {
            width: 18px !important;
            height: 18px !important;
        }

        .comments-list {
            display: flex;
            flex-direction: column;
            gap: 0.875rem;
            margin-bottom: 1.25rem;
        }

        .comment-item {
            position: relative;
            padding: 0.75rem 2.25rem 0.75rem 0.75rem;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            transition: all 0.2s ease;
        }

        .comment-item:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(255, 255, 255, 0.15);
        }

        .comment-item-content {
            padding-right: 0;
        }

        .comment-delete {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            width: 22px;
            height: 22px;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: transparent;
            border: none;
            border-radius: 6px;
            color: rgba(255, 255, 255, 0.35);
            cursor: pointer;
            transition: color 0.2s ease, background 0.2s ease;
            -webkit-tap-highlight-color: transparent;
        }

        .comment-delete:hover {
            background: rgba(255, 255, 255, 0.06);
            color: rgba(255, 255, 255, 0.55);
        }

        .comment-delete i,
        .comment-delete svg {
            width: 12px !important;
            height: 12px !important;
        }

        .comment-author {
            font-size: 0.75rem;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.95);
            margin-bottom: 0.25rem;
        }

        .comment-text {
            font-size: 0.8125rem;
            color: rgba(255, 255, 255, 0.75);
            line-height: 1.5;
        }

        .comment-form {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .comment-input {
            padding: 0.625rem 0.875rem;
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.8125rem;
            font-family: inherit;
            transition: all 0.2s ease;
            outline: none;
        }

        .comment-input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        .comment-input:focus {
            background: rgba(255, 255, 255, 0.12);
            border-color: rgba(255, 255, 255, 0.25);
        }

        .comment-submit {
            padding: 0.625rem 1rem;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.8125rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            align-self: flex-end;
            position: relative;
        }

        .comment-submit:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .comment-submit:active {
            transform: scale(0.98);
        }

        .comment-submit.is-loading {
            cursor: wait;
            pointer-events: none;
            opacity: 0.9;
            padding-right: 2.1rem;
        }

        .comment-submit.is-loading::before {
            content: 'Publicando...';
        }

        .comment-submit.is-loading span {
            opacity: 0;
        }

        .comment-submit.is-loading::after {
            content: '';
            position: absolute;
            width: 0.7rem;
            height: 0.7rem;
            right: 0.8rem;
            top: 50%;
            transform: translateY(-50%);
            border: 1.5px solid rgba(255, 255, 255, 0.28);
            border-top-color: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            animation: commentSubmitSpin 0.75s linear infinite;
        }

        @keyframes commentSubmitSpin {
            to {
                transform: translateY(-50%) rotate(360deg);
            }
        }

        @media (min-width: 768px) {
            .comments-section {
                padding: 2rem 2rem 2.5rem;
            }
            .comments-toggle {
                bottom: calc(2.5rem + 2.5rem);
                padding: 6px 10px;
                font-size: 0.6875rem;
            }
            .comments-toggle i,
            .comments-toggle svg,
            .comments-toggle .comments-icon {
                width: 11px !important;
                height: 11px !important;
            }
            .comments-toggle .comment-count {
                font-size: 0.6875rem;
            }
        }

        @media (max-width: 768px) {
            /* Мобильный: like/comment заметнее и удобнее для тапа */
            .video-section .like-btn,
            .comments-toggle {
                min-width: 64px;
                padding: 8px 13px;
                gap: 0.45rem;
            }

            .video-section .like-btn .like-icon {
                width: 13px;
                height: 13px;
            }

            .video-section .like-btn .like-count,
            .comments-toggle .comment-count {
                font-size: 0.75rem;
            }

            .comments-toggle i,
            .comments-toggle svg,
            .comments-toggle .comments-icon {
                width: 13px !important;
                height: 13px !important;
                min-width: 13px;
                min-height: 13px;
            }

            /* Мобильный: назад/звук компактнее и менее навязчивые */
            .shorts-back-btn {
                top: 1rem !important;
                left: 1rem !important;
                padding: 0.5rem !important;
            }

            .shorts-back-btn i,
            .shorts-back-btn svg {
                width: 1.05rem !important;
                height: 1.05rem !important;
            }

            .video-section .mute-toggle {
                top: 1rem !important;
                right: 1rem !important;
                padding: 0.5rem !important;
            }

            .video-section .mute-toggle i,
            .video-section .mute-toggle svg {
                width: 1rem !important;
                height: 1rem !important;
            }
        }

        /* Индикаторы загрузки и ошибки */
        .video-loading, .video-error {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 15;
            color: white;
            pointer-events: none;
        }

        .video-loading.hidden, .video-error:not(.show) {
            display: none;
        }

        .video-loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top-color: rgba(204, 136, 0, 0.6);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>

<body>

    <!-- FONDO ESTÁTICO (Nunca se mueve) -->
    <div id="static-background"></div>

    <!-- Calidez en toda la página (como index) -->
    <div id="warm-overlay"></div>

    <!-- BOTONES DE NAVEGACIÓN (Fijos) -->
    <a href="index.html"
        aria-label="Volver al inicio"
        class="shorts-back-btn fixed top-6 left-6 z-50 p-3 rounded-full bg-black/40 backdrop-blur-md border border-white/15 text-white hover:bg-black/60 hover:border-white/25 transition-all duration-300 hover:scale-110 active:scale-95 hover:shadow-[0_0_20px_rgba(204,136,0,0.2)] group">
        <i data-lucide="arrow-left" class="w-6 h-6 transition-opacity duration-300 opacity-90 group-hover:opacity-100" aria-hidden="true"></i>
    </a>

    <div class="fixed top-6 right-6 z-50 opacity-70 pointer-events-none hidden md:block">
        <span class="font-serif text-white tracking-[0.25em] text-xs drop-shadow-lg relative">
            <span class="relative z-10">A E T H E R</span>
            <span class="absolute inset-0 bg-gradient-to-r from-transparent via-[rgba(204,136,0,0.1)] to-transparent opacity-50 blur-sm"></span>
        </span>
    </div>

    <!-- EL ESCENARIO -->
    <div id="stage-wrapper">

        <!-- EL CONTENEDOR QUE SE MUEVE (Solo esto hace scroll) -->
        <div id="shorts-scroller">

            <!-- VIDEO 6 -->
            <div class="video-section">
            <!-- Cargamos el vídeo de forma diferida con data-src -->
            <video data-src="videos/short6.webm" preload="none" loop muted playsinline aria-label="Vinilo Session"></video>

                <!-- Indicador de carga -->
                <div class="video-loading">
                    <div class="video-loading-spinner" aria-hidden="true"></div>
                </div>

                <!-- Mensaje de error -->
                <div class="video-error">
                    <i data-lucide="alert-circle" class="w-12 h-12 mb-4 opacity-50" aria-hidden="true"></i>
                    <p class="text-sm">No se pudo cargar el video</p>
                </div>

                <div
                    class="absolute inset-0 bg-gradient-to-b from-black/10 via-transparent to-black/90 pointer-events-none">
                </div>

                <!-- Gradiente superior sutil con color de marca -->
                <div class="absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-transparent pointer-events-none z-10"></div>
                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-transparent pointer-events-none z-10"></div>
                <div class="absolute inset-0 bg-gradient-radial from-transparent via-transparent to-black/30 pointer-events-none z-10" style="background: radial-gradient(circle at center, transparent 0%, rgba(0, 0, 0, 0.3) 100%);"></div>

                <button
                    class="mute-toggle absolute top-5 right-5 p-3 bg-black/30 backdrop-blur-md rounded-full border border-white/15 text-white z-30 transition-all duration-300 hover:bg-black/50 hover:border-white/25 hover:scale-110 active:scale-95 hover:shadow-[0_0_20px_rgba(204,136,0,0.3)] group"
                    aria-label="Activar o desactivar sonido"
                    onclick="toggleMute(this, event)">
                    <i data-lucide="volume-x" class="w-5 h-5 transition-transform duration-300 group-hover:scale-110" aria-hidden="true"></i>
                </button>

                <!-- Кнопка лайка -->
                <button
                    class="like-btn"
                    aria-label="Me gusta"
                    data-video-id="short6"
                    data-base-likes="22"
                    onclick="toggleLike(this, event)">
                    <svg class="like-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                    </svg>
                    <span class="like-count"><span class="like-count-num">22</span></span>
                </button>

                <!-- Botón suscríbete -->
                <a href="https://www.instagram.com/aether_msh?igsh=d3VsZnpjMjY1eDZt&utm_source=qr" 
                   target="_blank" 
                   rel="noopener noreferrer"
                   class="subscribe-btn">
                    <i data-lucide="instagram"></i>
                    <span>Suscríbete</span>
                </a>

                <div
                    class="play-overlay absolute inset-0 flex items-center justify-center pointer-events-none opacity-0 transition-all duration-400 transform scale-150 z-20">
                    <div class="bg-black/50 p-6 rounded-full backdrop-blur-md border border-white/20 shadow-[0_0_40px_rgba(0,0,0,0.6)] relative group/play">
                        <div class="absolute inset-0 rounded-full bg-gradient-to-br from-white/10 to-transparent opacity-0 group-hover/play:opacity-100 transition-opacity duration-300"></div>
                        <i data-lucide="play" class="w-8 h-8 text-white fill-white ml-1 relative z-10 drop-shadow-lg"></i>
                        <div class="absolute inset-0 rounded-full bg-[radial-gradient(circle_at_center,rgba(204,136,0,0.2),transparent_70%)] opacity-0 group-hover/play:opacity-100 transition-opacity duration-300"></div>
                    </div>
                </div>

                <!-- Indicador de swipe (se oculta tras el primer gesto) -->
                <div class="swipe-indicator flex items-center justify-center text-white/70 pointer-events-none z-30">
                    <div
                        class="w-7 h-7 md:w-8 md:h-8 rounded-full border border-white/25 bg-black/55 backdrop-blur-md flex items-center justify-center shadow-lg shadow-black/60">
                        <i data-lucide="chevron-down" class="w-4 h-4 md:w-4.5 md:h-4.5"></i>
                    </div>
                </div>

                <div class="absolute bottom-0 left-0 w-full p-6 pb-10 pointer-events-none z-20">
                    <div class="video-info flex items-center gap-3 mb-3">
                        <div class="w-9 h-9 rounded-full overflow-hidden border border-white/30 shadow-lg backdrop-blur-sm bg-black/20 relative group/logo">
                            <div class="absolute inset-0 bg-gradient-to-br from-white/10 to-transparent opacity-0 group-hover/logo:opacity-100 transition-opacity duration-300"></div>
                            <img src="img/logo.png" alt="DJ Aether logo" class="w-full h-full object-cover relative z-10">
                        </div>
                        <span
                            class="text-[10px] uppercase tracking-widest text-white/95 font-bold drop-shadow-lg relative">
                            <span class="relative z-10">DJ Aether</span>
                            <span class="absolute inset-0 bg-gradient-to-r from-transparent via-[rgba(204,136,0,0.1)] to-transparent opacity-0 group-hover/logo:opacity-100 transition-opacity duration-300"></span>
                        </span>
                    </div>
                    <h2 class="video-title font-serif text-2xl md:text-3xl text-white mb-2 leading-tight drop-shadow-xl tracking-tight relative">
                        <span class="relative z-10">Vinilo Session</span>
                        <span class="absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent opacity-0 group-hover/logo:opacity-100 transition-opacity duration-500 blur-xl"></span>
                    </h2>
                    <p class="video-subtitle text-white/70 text-xs font-light drop-shadow-md flex items-center gap-2">
                        <span class="w-1 h-1 rounded-full bg-[rgba(204,136,0,0.6)]"></span>
                        Vinilo grabado • Barcelona
                    </p>
                </div>

                <!-- Botón para abrir comentarios -->
                <button class="comments-toggle" data-video-id="short6" onclick="toggleComments('short6', event)" aria-label="Ver comentarios">
                    <i data-lucide="message-circle" class="comments-icon"></i>
                    <span class="comment-count"><span class="comment-count-num">0</span></span>
                </button>

                <!-- Sección de comentarios -->
                <div class="comments-section" id="comments-short6" data-video-id="short6">
                    <div class="comments-header">
                        <h3 class="comments-title">Comentarios</h3>
                        <button class="comments-close" onclick="toggleComments('short6', event)" aria-label="Cerrar comentarios">
                            <i data-lucide="x" class="w-4 h-4"></i>
                        </button>
                    </div>
                    <div class="comments-list" id="comments-list-short6">
                        <!-- Los comentarios se cargarán aquí -->
                    </div>
                    <form class="comment-form" onsubmit="addComment('short6', event)">
                        <input type="text" class="comment-input" placeholder="Tu nombre" id="comment-name-short6" required>
                        <textarea class="comment-input" rows="2" placeholder="Escribe tu comentario..." id="comment-text-short6" required></textarea>
                        <button type="submit" class="comment-submit"><span>Publicar</span></button>
                    </form>
                </div>
            </div>

            <!-- VIDEO 1 -->
            <div class="video-section">
            <!-- Cargamos el vídeo de forma diferida con data-src -->
            <video data-src="videos/short1.webm" preload="none" loop muted playsinline aria-label="Deep Groove Session"></video>

                <!-- Indicador de carga -->
                <div class="video-loading">
                    <div class="video-loading-spinner" aria-hidden="true"></div>
                </div>

                <!-- Mensaje de error -->
                <div class="video-error">
                    <i data-lucide="alert-circle" class="w-12 h-12 mb-4 opacity-50" aria-hidden="true"></i>
                    <p class="text-sm">No se pudo cargar el video</p>
                </div>

                <div
                    class="absolute inset-0 bg-gradient-to-b from-black/10 via-transparent to-black/90 pointer-events-none">
                </div>

                <!-- Gradiente superior sutil con color de marca -->
                <div class="absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-transparent pointer-events-none z-10"></div>
                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-transparent pointer-events-none z-10"></div>
                <div class="absolute inset-0 bg-gradient-radial from-transparent via-transparent to-black/30 pointer-events-none z-10" style="background: radial-gradient(circle at center, transparent 0%, rgba(0, 0, 0, 0.3) 100%);"></div>

                <button
                    class="mute-toggle absolute top-5 right-5 p-3 bg-black/30 backdrop-blur-md rounded-full border border-white/15 text-white z-30 transition-all duration-300 hover:bg-black/50 hover:border-white/25 hover:scale-110 active:scale-95 hover:shadow-[0_0_20px_rgba(204,136,0,0.3)] group"
                    aria-label="Activar o desactivar sonido"
                    onclick="toggleMute(this, event)">
                    <i data-lucide="volume-x" class="w-5 h-5 transition-transform duration-300 group-hover:scale-110" aria-hidden="true"></i>
                </button>

                <!-- Кнопка лайка -->
                <button
                    class="like-btn"
                    aria-label="Me gusta"
                    data-video-id="short1"
                    data-base-likes="18"
                    onclick="toggleLike(this, event)">
                    <svg class="like-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                    </svg>
                    <span class="like-count"><span class="like-count-num">18</span></span>
                </button>

                <!-- Botón suscríbete -->
                <a href="https://www.instagram.com/aether_msh?igsh=d3VsZnpjMjY1eDZt&utm_source=qr" 
                   target="_blank" 
                   rel="noopener noreferrer"
                   class="subscribe-btn">
                    <i data-lucide="instagram"></i>
                    <span>Suscríbete</span>
                </a>

                <div
                    class="play-overlay absolute inset-0 flex items-center justify-center pointer-events-none opacity-0 transition-all duration-400 transform scale-150 z-20">
                    <div class="bg-black/50 p-6 rounded-full backdrop-blur-md border border-white/20 shadow-[0_0_40px_rgba(0,0,0,0.6)] relative group/play">
                        <div class="absolute inset-0 rounded-full bg-gradient-to-br from-white/10 to-transparent opacity-0 group-hover/play:opacity-100 transition-opacity duration-300"></div>
                        <i data-lucide="play" class="w-8 h-8 text-white fill-white ml-1 relative z-10 drop-shadow-lg"></i>
                        <div class="absolute inset-0 rounded-full bg-[radial-gradient(circle_at_center,rgba(204,136,0,0.2),transparent_70%)] opacity-0 group-hover/play:opacity-100 transition-opacity duration-300"></div>
                    </div>
                </div>

                <!-- Indicador de swipe (se oculta tras el primer gesto) -->
                <div class="swipe-indicator flex items-center justify-center text-white/70 pointer-events-none z-30">
                    <div
                        class="w-7 h-7 md:w-8 md:h-8 rounded-full border border-white/25 bg-black/55 backdrop-blur-md flex items-center justify-center shadow-lg shadow-black/60">
                        <i data-lucide="chevron-down" class="w-4 h-4 md:w-4.5 md:h-4.5"></i>
                    </div>
                </div>

                <div class="absolute bottom-0 left-0 w-full p-6 pb-10 pointer-events-none z-20">
                    <div class="video-info flex items-center gap-3 mb-3">
                        <div class="w-9 h-9 rounded-full overflow-hidden border border-white/30 shadow-lg backdrop-blur-sm bg-black/20 relative group/logo">
                            <div class="absolute inset-0 bg-gradient-to-br from-white/10 to-transparent opacity-0 group-hover/logo:opacity-100 transition-opacity duration-300"></div>
                            <img src="img/logo.png" alt="DJ Aether logo" class="w-full h-full object-cover relative z-10">
                        </div>
                        <span
                            class="text-[10px] uppercase tracking-widest text-white/95 font-bold drop-shadow-lg relative">
                            <span class="relative z-10">DJ Aether</span>
                            <span class="absolute inset-0 bg-gradient-to-r from-transparent via-[rgba(204,136,0,0.1)] to-transparent opacity-0 group-hover/logo:opacity-100 transition-opacity duration-300"></span>
                        </span>
                    </div>
                    <h2 class="video-title font-serif text-2xl md:text-3xl text-white mb-2 leading-tight drop-shadow-xl tracking-tight relative">
                        <span class="relative z-10">Deep Groove Session</span>
                        <span class="absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent opacity-0 group-hover/logo:opacity-100 transition-opacity duration-500 blur-xl"></span>
                    </h2>
                    <p class="video-subtitle text-white/70 text-xs font-light drop-shadow-md flex items-center gap-2">
                        <span class="w-1 h-1 rounded-full bg-[rgba(204,136,0,0.6)]"></span>
                        Vinilo grabado • Barcelona
                    </p>
                </div>

                <!-- Botón para abrir comentarios -->
                <button class="comments-toggle" data-video-id="short1" onclick="toggleComments('short1', event)" aria-label="Ver comentarios">
                    <i data-lucide="message-circle" class="comments-icon"></i>
                    <span class="comment-count"><span class="comment-count-num">0</span></span>
                </button>

                <!-- Sección de comentarios -->
                <div class="comments-section" id="comments-short1" data-video-id="short1">
                    <div class="comments-header">
                        <h3 class="comments-title">Comentarios</h3>
                        <button class="comments-close" onclick="toggleComments('short1', event)" aria-label="Cerrar comentarios">
                            <i data-lucide="x" class="w-4 h-4"></i>
                        </button>
                    </div>
                    <div class="comments-list" id="comments-list-short1">
                        <!-- Los comentarios se cargarán aquí -->
                    </div>
                    <form class="comment-form" onsubmit="addComment('short1', event)">
                        <input type="text" class="comment-input" placeholder="Tu nombre" id="comment-name-short1" required>
                        <textarea class="comment-input" rows="2" placeholder="Escribe tu comentario..." id="comment-text-short1" required></textarea>
                        <button type="submit" class="comment-submit"><span>Publicar</span></button>
                    </form>
                </div>
            </div>

            <!-- VIDEO 2 -->
            <div class="video-section">
                <video data-src="videos/short2.webm" preload="none" loop muted playsinline aria-label="Atmosphere & Texture"></video>

                <!-- Indicador de carga -->
                <div class="video-loading">
                    <div class="video-loading-spinner" aria-hidden="true"></div>
                </div>

                <!-- Mensaje de error -->
                <div class="video-error">
                    <i data-lucide="alert-circle" class="w-12 h-12 mb-4 opacity-50" aria-hidden="true"></i>
                    <p class="text-sm">No se pudo cargar el video</p>
                </div>

                <div
                    class="absolute inset-0 bg-gradient-to-b from-black/10 via-transparent to-black/90 pointer-events-none">
                </div>

                <!-- Gradiente superior sutil con color de marca -->
                <div class="absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-transparent pointer-events-none z-10"></div>
                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-transparent pointer-events-none z-10"></div>
                <div class="absolute inset-0 bg-gradient-radial from-transparent via-transparent to-black/30 pointer-events-none z-10" style="background: radial-gradient(circle at center, transparent 0%, rgba(0, 0, 0, 0.3) 100%);"></div>

                <button
                    class="mute-toggle absolute top-5 right-5 p-3 bg-black/30 backdrop-blur-md rounded-full border border-white/15 text-white z-30 transition-all duration-300 hover:bg-black/50 hover:border-white/25 hover:scale-110 active:scale-95 hover:shadow-[0_0_20px_rgba(204,136,0,0.3)] group"
                    aria-label="Activar o desactivar sonido"
                    onclick="toggleMute(this, event)">
                    <i data-lucide="volume-x" class="w-5 h-5 transition-transform duration-300 group-hover:scale-110" aria-hidden="true"></i>
                </button>

                <!-- Кнопка лайка -->
                <button
                    class="like-btn"
                    aria-label="Me gusta"
                    data-video-id="short2"
                    data-base-likes="20"
                    onclick="toggleLike(this, event)">
                    <svg class="like-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                    </svg>
                    <span class="like-count"><span class="like-count-num">20</span></span>
                </button>

                <!-- Botón suscríbete -->
                <a href="https://www.instagram.com/aether_msh?igsh=d3VsZnpjMjY1eDZt&utm_source=qr" 
                   target="_blank" 
                   rel="noopener noreferrer"
                   class="subscribe-btn">
                    <i data-lucide="instagram"></i>
                    <span>Suscríbete</span>
                </a>

                <div
                    class="play-overlay absolute inset-0 flex items-center justify-center pointer-events-none opacity-0 transition-all duration-400 transform scale-150 z-20">
                    <div class="bg-black/50 p-6 rounded-full backdrop-blur-md border border-white/20 shadow-[0_0_40px_rgba(0,0,0,0.6)] relative group/play">
                        <div class="absolute inset-0 rounded-full bg-gradient-to-br from-white/10 to-transparent opacity-0 group-hover/play:opacity-100 transition-opacity duration-300"></div>
                        <i data-lucide="play" class="w-8 h-8 text-white fill-white ml-1 relative z-10 drop-shadow-lg"></i>
                        <div class="absolute inset-0 rounded-full bg-[radial-gradient(circle_at_center,rgba(204,136,0,0.2),transparent_70%)] opacity-0 group-hover/play:opacity-100 transition-opacity duration-300"></div>
                    </div>
                </div>

                <div class="absolute bottom-0 left-0 w-full p-6 pb-10 pointer-events-none z-20">
                    <div class="video-info flex items-center gap-3 mb-3">
                        <div class="w-9 h-9 rounded-full overflow-hidden border border-white/30 shadow-lg backdrop-blur-sm bg-black/20 relative group/logo">
                            <div class="absolute inset-0 bg-gradient-to-br from-white/10 to-transparent opacity-0 group-hover/logo:opacity-100 transition-opacity duration-300"></div>
                            <img src="img/logo.png" alt="DJ Aether logo" class="w-full h-full object-cover relative z-10">
                        </div>
                        <span
                            class="text-[10px] uppercase tracking-widest text-white/95 font-bold drop-shadow-lg relative">
                            <span class="relative z-10">DJ Aether</span>
                            <span class="absolute inset-0 bg-gradient-to-r from-transparent via-[rgba(204,136,0,0.1)] to-transparent opacity-0 group-hover/logo:opacity-100 transition-opacity duration-300"></span>
                        </span>
                    </div>
                    <h2 class="video-title font-serif text-2xl md:text-3xl text-white mb-2 leading-tight drop-shadow-xl tracking-tight relative">
                        <span class="relative z-10">Atmosphere & Texture</span>
                        <span class="absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent opacity-0 group-hover/logo:opacity-100 transition-opacity duration-500 blur-xl"></span>
                    </h2>
                    <p class="video-subtitle text-white/70 text-xs font-light drop-shadow-md flex items-center gap-2">
                        <span class="w-1 h-1 rounded-full bg-[rgba(204,136,0,0.6)]"></span>
                        Vinilo grabado • Warm up set
                    </p>
                </div>

                <!-- Botón para abrir comentarios -->
                <button class="comments-toggle" data-video-id="short2" onclick="toggleComments('short2', event)" aria-label="Ver comentarios">
                    <i data-lucide="message-circle" class="comments-icon"></i>
                    <span class="comment-count"><span class="comment-count-num">0</span></span>
                </button>

                <!-- Sección de comentarios -->
                <div class="comments-section" id="comments-short2" data-video-id="short2">
                    <div class="comments-header">
                        <h3 class="comments-title">Comentarios</h3>
                        <button class="comments-close" onclick="toggleComments('short2', event)" aria-label="Cerrar comentarios">
                            <i data-lucide="x" class="w-4 h-4"></i>
                        </button>
                    </div>
                    <div class="comments-list" id="comments-list-short2"></div>
                    <form class="comment-form" onsubmit="addComment('short2', event)">
                        <input type="text" class="comment-input" placeholder="Tu nombre" id="comment-name-short2" required>
                        <textarea class="comment-input" rows="2" placeholder="Escribe tu comentario..." id="comment-text-short2" required></textarea>
                        <button type="submit" class="comment-submit"><span>Publicar</span></button>
                    </form>
                </div>
            </div>

            <!-- VIDEO 3 -->
            <div class="video-section">
                <video data-src="videos/short3.webm" preload="none" loop muted playsinline
                    aria-label="Soulful Selection"></video>
            
                <!-- Indicador de carga -->
                <div class="video-loading">
                    <div class="video-loading-spinner" aria-hidden="true"></div>
                </div>
            
                <!-- Mensaje de error -->
                <div class="video-error">
                    <i data-lucide="alert-circle" class="w-12 h-12 mb-4 opacity-50" aria-hidden="true"></i>
                    <p class="text-sm">No se pudo cargar el video</p>
                </div>
            
                <div class="absolute inset-0 bg-gradient-to-b from-black/10 via-transparent to-black/90 pointer-events-none">
                </div>
            
                <!-- Gradiente superior sutil con color de marca -->
                <div
                    class="absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-transparent pointer-events-none z-10">
                </div>
                <div
                    class="absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-transparent pointer-events-none z-10">
                </div>
                <div class="absolute inset-0 bg-gradient-radial from-transparent via-transparent to-black/30 pointer-events-none z-10"
                    style="background: radial-gradient(circle at center, transparent 0%, rgba(0, 0, 0, 0.3) 100%);"></div>
            
                <button
                    class="mute-toggle absolute top-5 right-5 p-3 bg-black/30 backdrop-blur-md rounded-full border border-white/15 text-white z-30 transition-all duration-300 hover:bg-black/50 hover:border-white/25 hover:scale-110 active:scale-95 hover:shadow-[0_0_20px_rgba(204,136,0,0.3)] group"
                    aria-label="Activar o desactivar sonido" onclick="toggleMute(this, event)">
                    <i data-lucide="volume-x" class="w-5 h-5 transition-transform duration-300 group-hover:scale-110"
                        aria-hidden="true"></i>
                </button>

                <!-- Кнопка лайка -->
                <button
                    class="like-btn"
                    aria-label="Me gusta"
                    data-video-id="short3"
                    data-base-likes="34"
                    onclick="toggleLike(this, event)">
                    <svg class="like-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                    </svg>
                    <span class="like-count"><span class="like-count-num">34</span></span>
                </button>

                <!-- Botón suscríbete -->
                <a href="https://www.instagram.com/aether_msh?igsh=d3VsZnpjMjY1eDZt&utm_source=qr" 
                   target="_blank" 
                   rel="noopener noreferrer"
                   class="subscribe-btn">
                    <i data-lucide="instagram"></i>
                    <span>Suscríbete</span>
                </a>
            
                <div
                    class="play-overlay absolute inset-0 flex items-center justify-center pointer-events-none opacity-0 transition-all duration-400 transform scale-150 z-20">
                    <div
                        class="bg-black/50 p-6 rounded-full backdrop-blur-md border border-white/20 shadow-[0_0_40px_rgba(0,0,0,0.6)] relative group/play">
                        <div
                            class="absolute inset-0 rounded-full bg-gradient-to-br from-white/10 to-transparent opacity-0 group-hover/play:opacity-100 transition-opacity duration-300">
                        </div>
                        <i data-lucide="play" class="w-8 h-8 text-white fill-white ml-1 relative z-10 drop-shadow-lg"></i>
                        <div
                            class="absolute inset-0 rounded-full bg-[radial-gradient(circle_at_center,rgba(204,136,0,0.2),transparent_70%)] opacity-0 group-hover/play:opacity-100 transition-opacity duration-300">
                        </div>
                    </div>
                </div>
            
                <div class="absolute bottom-0 left-0 w-full p-6 pb-10 pointer-events-none z-20">
                    <div class="video-info flex items-center gap-3 mb-3">
                        <div
                            class="w-9 h-9 rounded-full overflow-hidden border border-white/30 shadow-lg backdrop-blur-sm bg-black/20 relative group/logo">
                            <div
                                class="absolute inset-0 bg-gradient-to-br from-white/10 to-transparent opacity-0 group-hover/logo:opacity-100 transition-opacity duration-300">
                            </div>
                            <img src="img/logo.png" alt="DJ Aether logo" class="w-full h-full object-cover relative z-10">
                        </div>
                        <span class="text-[10px] uppercase tracking-widest text-white/95 font-bold drop-shadow-lg relative">
                            <span class="relative z-10">DJ Aether</span>
                            <span
                                class="absolute inset-0 bg-gradient-to-r from-transparent via-[rgba(204,136,0,0.1)] to-transparent opacity-0 group-hover/logo:opacity-100 transition-opacity duration-300"></span>
                        </span>
                    </div>
                    <h2
                        class="video-title font-serif text-2xl md:text-3xl text-white mb-2 leading-tight drop-shadow-xl tracking-tight relative">
                        <span class="relative z-10">Soulful Selection</span>
                        <span
                            class="absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent opacity-0 group-hover/logo:opacity-100 transition-opacity duration-500 blur-xl"></span>
                    </h2>
                    <p class="video-subtitle text-white/70 text-xs font-light drop-shadow-md flex items-center gap-2">
                        <span class="w-1 h-1 rounded-full bg-[rgba(204,136,0,0.6)]"></span>
                        Vinilo grabado • Deep House
                    </p>
                </div>

                <!-- Botón para abrir comentarios -->
                <button class="comments-toggle" data-video-id="short3" onclick="toggleComments('short3', event)" aria-label="Ver comentarios">
                    <i data-lucide="message-circle" class="comments-icon"></i>
                    <span class="comment-count"><span class="comment-count-num">0</span></span>
                </button>

                <!-- Sección de comentarios -->
                <div class="comments-section" id="comments-short3" data-video-id="short3">
                    <div class="comments-header">
                        <h3 class="comments-title">Comentarios</h3>
                        <button class="comments-close" onclick="toggleComments('short3', event)" aria-label="Cerrar comentarios">
                            <i data-lucide="x" class="w-4 h-4"></i>
                        </button>
                    </div>
                    <div class="comments-list" id="comments-list-short3"></div>
                    <form class="comment-form" onsubmit="addComment('short3', event)">
                        <input type="text" class="comment-input" placeholder="Tu nombre" id="comment-name-short3" required>
                        <textarea class="comment-input" rows="2" placeholder="Escribe tu comentario..." id="comment-text-short3" required></textarea>
                        <button type="submit" class="comment-submit"><span>Publicar</span></button>
                    </form>
                </div>
            </div>

            <!-- VIDEO 4 -->
            <div class="video-section">
                <video data-src="videos/short4.webm" preload="none" loop muted playsinline
                    aria-label="Organic Grooves"></video>
            
                <!-- Indicador de carga -->
                <div class="video-loading">
                    <div class="video-loading-spinner" aria-hidden="true"></div>
                </div>
            
                <!-- Mensaje de error -->
                <div class="video-error">
                    <i data-lucide="alert-circle" class="w-12 h-12 mb-4 opacity-50" aria-hidden="true"></i>
                    <p class="text-sm">No se pudo cargar el video</p>
                </div>
            
                <div class="absolute inset-0 bg-gradient-to-b from-black/10 via-transparent to-black/90 pointer-events-none">
                </div>
            
                <!-- Gradiente superior sutil con color de marca -->
                <div
                    class="absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-transparent pointer-events-none z-10">
                </div>
                <div
                    class="absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-transparent pointer-events-none z-10">
                </div>
                <div class="absolute inset-0 bg-gradient-radial from-transparent via-transparent to-black/30 pointer-events-none z-10"
                    style="background: radial-gradient(circle at center, transparent 0%, rgba(0, 0, 0, 0.3) 100%);"></div>
            
                <button
                    class="mute-toggle absolute top-5 right-5 p-3 bg-black/30 backdrop-blur-md rounded-full border border-white/15 text-white z-30 transition-all duration-300 hover:bg-black/50 hover:border-white/25 hover:scale-110 active:scale-95 hover:shadow-[0_0_20px_rgba(204,136,0,0.3)] group"
                    aria-label="Activar o desactivar sonido" onclick="toggleMute(this, event)">
                    <i data-lucide="volume-x" class="w-5 h-5 transition-transform duration-300 group-hover:scale-110"
                        aria-hidden="true"></i>
                </button>

                <!-- Кнопка лайка -->
                <button
                    class="like-btn"
                    aria-label="Me gusta"
                    data-video-id="short4"
                    data-base-likes="27"
                    onclick="toggleLike(this, event)">
                    <svg class="like-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                    </svg>
                    <span class="like-count"><span class="like-count-num">27</span></span>
                </button>

                <!-- Botón suscríbete -->
                <a href="https://www.instagram.com/aether_msh?igsh=d3VsZnpjMjY1eDZt&utm_source=qr" 
                   target="_blank" 
                   rel="noopener noreferrer"
                   class="subscribe-btn">
                    <i data-lucide="instagram"></i>
                    <span>Suscríbete</span>
                </a>
            
                <div
                    class="play-overlay absolute inset-0 flex items-center justify-center pointer-events-none opacity-0 transition-all duration-400 transform scale-150 z-20">
                    <div
                        class="bg-black/50 p-6 rounded-full backdrop-blur-md border border-white/20 shadow-[0_0_40px_rgba(0,0,0,0.6)] relative group/play">
                        <div
                            class="absolute inset-0 rounded-full bg-gradient-to-br from-white/10 to-transparent opacity-0 group-hover/play:opacity-100 transition-opacity duration-300">
                        </div>
                        <i data-lucide="play" class="w-8 h-8 text-white fill-white ml-1 relative z-10 drop-shadow-lg"></i>
                        <div
                            class="absolute inset-0 rounded-full bg-[radial-gradient(circle_at_center,rgba(204,136,0,0.2),transparent_70%)] opacity-0 group-hover/play:opacity-100 transition-opacity duration-300">
                        </div>
                    </div>
                </div>
            
                <div class="absolute bottom-0 left-0 w-full p-6 pb-10 pointer-events-none z-20">
                    <div class="video-info flex items-center gap-3 mb-3">
                        <div
                            class="w-9 h-9 rounded-full overflow-hidden border border-white/30 shadow-lg backdrop-blur-sm bg-black/20 relative group/logo">
                            <div
                                class="absolute inset-0 bg-gradient-to-br from-white/10 to-transparent opacity-0 group-hover/logo:opacity-100 transition-opacity duration-300">
                            </div>
                            <img src="img/logo.png" alt="DJ Aether logo" class="w-full h-full object-cover relative z-10">
                        </div>
                        <span class="text-[10px] uppercase tracking-widest text-white/95 font-bold drop-shadow-lg relative">
                            <span class="relative z-10">DJ Aether</span>
                            <span
                                class="absolute inset-0 bg-gradient-to-r from-transparent via-[rgba(204,136,0,0.1)] to-transparent opacity-0 group-hover/logo:opacity-100 transition-opacity duration-300"></span>
                        </span>
                    </div>
                    <h2
                        class="video-title font-serif text-2xl md:text-3xl text-white mb-2 leading-tight drop-shadow-xl tracking-tight relative">
                        <span class="relative z-10">Organic Grooves</span>
                        <span
                            class="absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent opacity-0 group-hover/logo:opacity-100 transition-opacity duration-500 blur-xl"></span>
                    </h2>
                    <p class="video-subtitle text-white/70 text-xs font-light drop-shadow-md flex items-center gap-2">
                        <span class="w-1 h-1 rounded-full bg-[rgba(204,136,0,0.6)]"></span>
                        Vinilo grabado • Organic House
                    </p>
                </div>

                <!-- Botón para abrir comentarios -->
                <button class="comments-toggle" data-video-id="short4" onclick="toggleComments('short4', event)" aria-label="Ver comentarios">
                    <i data-lucide="message-circle" class="comments-icon"></i>
                    <span class="comment-count"><span class="comment-count-num">0</span></span>
                </button>

                <!-- Sección de comentarios -->
                <div class="comments-section" id="comments-short4" data-video-id="short4">
                    <div class="comments-header">
                        <h3 class="comments-title">Comentarios</h3>
                        <button class="comments-close" onclick="toggleComments('short4', event)" aria-label="Cerrar comentarios">
                            <i data-lucide="x" class="w-4 h-4"></i>
                        </button>
                    </div>
                    <div class="comments-list" id="comments-list-short4"></div>
                    <form class="comment-form" onsubmit="addComment('short4', event)">
                        <input type="text" class="comment-input" placeholder="Tu nombre" id="comment-name-short4" required>
                        <textarea class="comment-input" rows="2" placeholder="Escribe tu comentario..." id="comment-text-short4" required></textarea>
                        <button type="submit" class="comment-submit"><span>Publicar</span></button>
                    </form>
                </div>
            </div>

            <!-- VIDEO 5 -->
            <div class="video-section">
                <video data-src="videos/short5.webm" preload="none" loop muted playsinline
                    aria-label="Warm Vibes"></video>
            
                <!-- Indicador de carga -->
                <div class="video-loading">
                    <div class="video-loading-spinner" aria-hidden="true"></div>
                </div>
            
                <!-- Mensaje de error -->
                <div class="video-error">
                    <i data-lucide="alert-circle" class="w-12 h-12 mb-4 opacity-50" aria-hidden="true"></i>
                    <p class="text-sm">No se pudo cargar el video</p>
                </div>
            
                <div class="absolute inset-0 bg-gradient-to-b from-black/10 via-transparent to-black/90 pointer-events-none">
                </div>
            
                <!-- Gradiente superior sutil con color de marca -->
                <div
                    class="absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-transparent pointer-events-none z-10">
                </div>
                <div
                    class="absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-transparent pointer-events-none z-10">
                </div>
                <div class="absolute inset-0 bg-gradient-radial from-transparent via-transparent to-black/30 pointer-events-none z-10"
                    style="background: radial-gradient(circle at center, transparent 0%, rgba(0, 0, 0, 0.3) 100%);"></div>
            
                <button
                    class="mute-toggle absolute top-5 right-5 p-3 bg-black/30 backdrop-blur-md rounded-full border border-white/15 text-white z-30 transition-all duration-300 hover:bg-black/50 hover:border-white/25 hover:scale-110 active:scale-95 hover:shadow-[0_0_20px_rgba(204,136,0,0.3)] group"
                    aria-label="Activar o desactivar sonido" onclick="toggleMute(this, event)">
                    <i data-lucide="volume-x" class="w-5 h-5 transition-transform duration-300 group-hover:scale-110"
                        aria-hidden="true"></i>
                </button>

                <!-- Кнопка лайка -->
                <button
                    class="like-btn"
                    aria-label="Me gusta"
                    data-video-id="short5"
                    data-base-likes="31"
                    onclick="toggleLike(this, event)">
                    <svg class="like-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                    </svg>
                    <span class="like-count"><span class="like-count-num">31</span></span>
                </button>

                <!-- Botón suscríbete -->
                <a href="https://www.instagram.com/aether_msh?igsh=d3VsZnpjMjY1eDZt&utm_source=qr" 
                   target="_blank" 
                   rel="noopener noreferrer"
                   class="subscribe-btn">
                    <i data-lucide="instagram"></i>
                    <span>Suscríbete</span>
                </a>
            
                <div
                    class="play-overlay absolute inset-0 flex items-center justify-center pointer-events-none opacity-0 transition-all duration-400 transform scale-150 z-20">
                    <div
                        class="bg-black/50 p-6 rounded-full backdrop-blur-md border border-white/20 shadow-[0_0_40px_rgba(0,0,0,0.6)] relative group/play">
                        <div
                            class="absolute inset-0 rounded-full bg-gradient-to-br from-white/10 to-transparent opacity-0 group-hover/play:opacity-100 transition-opacity duration-300">
                        </div>
                        <i data-lucide="play" class="w-8 h-8 text-white fill-white ml-1 relative z-10 drop-shadow-lg"></i>
                        <div
                            class="absolute inset-0 rounded-full bg-[radial-gradient(circle_at_center,rgba(204,136,0,0.2),transparent_70%)] opacity-0 group-hover/play:opacity-100 transition-opacity duration-300">
                        </div>
                    </div>
                </div>
            
                <div class="absolute bottom-0 left-0 w-full p-6 pb-10 pointer-events-none z-20">
                    <div class="video-info flex items-center gap-3 mb-3">
                        <div
                            class="w-9 h-9 rounded-full overflow-hidden border border-white/30 shadow-lg backdrop-blur-sm bg-black/20 relative group/logo">
                            <div
                                class="absolute inset-0 bg-gradient-to-br from-white/10 to-transparent opacity-0 group-hover/logo:opacity-100 transition-opacity duration-300">
                            </div>
                            <img src="img/logo.png" alt="DJ Aether logo" class="w-full h-full object-cover relative z-10">
                        </div>
                        <span class="text-[10px] uppercase tracking-widest text-white/95 font-bold drop-shadow-lg relative">
                            <span class="relative z-10">DJ Aether</span>
                            <span
                                class="absolute inset-0 bg-gradient-to-r from-transparent via-[rgba(204,136,0,0.1)] to-transparent opacity-0 group-hover/logo:opacity-100 transition-opacity duration-300"></span>
                        </span>
                    </div>
                    <h2
                        class="video-title font-serif text-2xl md:text-3xl text-white mb-2 leading-tight drop-shadow-xl tracking-tight relative">
                        <span class="relative z-10">Warm Vibes</span>
                        <span
                            class="absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent opacity-0 group-hover/logo:opacity-100 transition-opacity duration-500 blur-xl"></span>
                    </h2>
                    <p class="video-subtitle text-white/70 text-xs font-light drop-shadow-md flex items-center gap-2">
                        <span class="w-1 h-1 rounded-full bg-[rgba(204,136,0,0.6)]"></span>
                        Vinilo grabado • Soulful House
                    </p>
                </div>

                <!-- Botón para abrir comentarios -->
                <button class="comments-toggle" data-video-id="short5" onclick="toggleComments('short5', event)" aria-label="Ver comentarios">
                    <i data-lucide="message-circle" class="comments-icon"></i>
                    <span class="comment-count"><span class="comment-count-num">0</span></span>
                </button>

                <!-- Sección de comentarios -->
                <div class="comments-section" id="comments-short5" data-video-id="short5">
                    <div class="comments-header">
                        <h3 class="comments-title">Comentarios</h3>
                        <button class="comments-close" onclick="toggleComments('short5', event)" aria-label="Cerrar comentarios">
                            <i data-lucide="x" class="w-4 h-4"></i>
                        </button>
                    </div>
                    <div class="comments-list" id="comments-list-short5"></div>
                    <form class="comment-form" onsubmit="addComment('short5', event)">
                        <input type="text" class="comment-input" placeholder="Tu nombre" id="comment-name-short5" required>
                        <textarea class="comment-input" rows="2" placeholder="Escribe tu comentario..." id="comment-text-short5" required></textarea>
                        <button type="submit" class="comment-submit"><span>Publicar</span></button>
                    </form>
                </div>
            </div>

        
        </div>
    </div>


    <!-- JAVASCRIPT FINAL Y PULIDO -->
<script>
    // Inicializar iconos Lucide
    if (typeof lucide !== 'undefined') {
        lucide.createIcons();
    }

    const scroller = document.getElementById('shorts-scroller');
    const swipeIndicators = Array.from(document.querySelectorAll('.swipe-indicator'));
    let swipeIndicatorHidden = false;
    
    // Estado global de mute (por defecto muted para autoplay)
    let globalMuteState = true; // true = muted, false = unmuted
    
    // Función para actualizar todos los botones de mute según el estado global
    function updateAllMuteButtons() {
        document.querySelectorAll('.mute-toggle').forEach(btn => {
            const section = btn.closest('.video-section');
            if (section) {
                const video = section.querySelector('video');
                if (video) {
                    video.muted = globalMuteState;
                    btn.innerHTML = globalMuteState 
                        ? '<i data-lucide="volume-x" class="w-5 h-5" aria-hidden="true"></i>' 
                        : '<i data-lucide="volume-2" class="w-5 h-5" aria-hidden="true"></i>';
                }
            }
        });
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }
    }

    function hideSwipeIndicator() {
        if (swipeIndicatorHidden || !swipeIndicators.length) return;
        swipeIndicatorHidden = true;
        swipeIndicators.forEach(el => {
            el.style.opacity = '0';
            // Opcional: eliminar del flujo después de la transición
            setTimeout(() => {
                el.style.display = 'none';
            }, 400);
        });
    }

    // Ocultar al hacer scroll (primer gesto de swipe)
    if (scroller) {
        scroller.addEventListener('scroll', () => {
            // Оculta en cuanto haya cualquier desplazamiento
            if (scroller.scrollTop > 10) {
                hideSwipeIndicator();
            }
        }, { passive: true });
    }

    // Подстраховка: если пользователь просто тапает/кликает
    document.querySelectorAll('.video-section').forEach(section => {
        section.addEventListener('click', () => {
            hideSwipeIndicator();
        }, { once: false });
    });

    // Detección de swipe izquierdo para volver a index.html
    let touchStartX = 0;
    let touchStartY = 0;
    let touchEndX = 0;
    let touchEndY = 0;
    const minSwipeDistance = 50; // Distancia mínima para considerar un swipe
    const maxVerticalDistance = 100; // Máxima distancia vertical permitida para un swipe horizontal

    document.addEventListener('touchstart', (e) => {
        touchStartX = e.changedTouches[0].screenX;
        touchStartY = e.changedTouches[0].screenY;
    }, { passive: true });

    document.addEventListener('touchend', (e) => {
        touchEndX = e.changedTouches[0].screenX;
        touchEndY = e.changedTouches[0].screenY;
        
        const deltaX = touchStartX - touchEndX; // Positivo si se desliza hacia la izquierda
        const deltaY = Math.abs(touchStartY - touchEndY);
        
        // Verificar que es un swipe izquierdo (deltaX positivo y mayor que minSwipeDistance)
        // y que no es principalmente vertical (deltaY menor que maxVerticalDistance)
        if (deltaX > minSwipeDistance && deltaY < maxVerticalDistance) {
            // Redirigir a index.html
            window.location.href = 'index.html';
        }
    }, { passive: true });

    // 1. AUTO-PLAY + CARGA PEREZOSA (Intersection Observer OPTIMIZADO)
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            const video = entry.target.querySelector('video');
            const overlay = entry.target.querySelector('.play-overlay');
            const loadingIndicator = entry.target.querySelector('.video-loading');
            const errorIndicator = entry.target.querySelector('.video-error');

            if (entry.isIntersecting) {
                // Cargamos el src solo cuando el vídeo entra en pantalla
                if (video && !video.src) {
                    const dataSrc = video.getAttribute('data-src');
                    if (dataSrc) {
                        // Mostrar indicador de carga
                        if (loadingIndicator) {
                            loadingIndicator.classList.remove('hidden');
                        }
                        if (errorIndicator) {
                            errorIndicator.classList.remove('show');
                        }

                        // Manejar eventos de carga
                        const handleCanPlay = () => {
                            if (loadingIndicator) {
                                loadingIndicator.classList.add('hidden');
                            }
                            video.removeEventListener('canplay', handleCanPlay);
                            // Reproducir solo cuando hay datos suficientes (evita fallos de play())
                            video.currentTime = 0;
                            const playPromise = video.play();
                            if (playPromise !== undefined) {
                                playPromise.catch(() => {
                                    if (overlay) {
                                        overlay.style.opacity = '1';
                                        overlay.style.transform = 'scale(1)';
                                    }
                                });
                            }
                        };

                        const handleError = () => {
                            if (loadingIndicator) {
                                loadingIndicator.classList.add('hidden');
                            }
                            if (errorIndicator) {
                                errorIndicator.classList.add('show');
                            }
                            video.removeEventListener('error', handleError);
                            console.error('Error al cargar el video:', dataSrc);
                        };

                        video.addEventListener('canplay', handleCanPlay, { once: true });
                        video.addEventListener('error', handleError, { once: true });

                        video.src = dataSrc;
                        try {
                            video.preload = 'auto';
                        } catch (e) {
                            console.warn('No se pudo establecer preload:', e);
                        }
                        video.muted = globalMuteState;
                        // Ocultar overlay al entrar (el play se hace en handleCanPlay)
                        if (overlay) {
                            overlay.style.opacity = '0';
                            overlay.style.transform = 'scale(1.5)';
                        }
                    }
                } else if (video && video.src) {
                    video.muted = globalMuteState;
                    if (overlay) {
                        overlay.style.opacity = '0';
                        overlay.style.transform = 'scale(1.5)';
                    }
                    video.currentTime = 0;
                    const playPromise = video.play();
                    if (playPromise !== undefined) {
                        playPromise.then(() => {}).catch(() => {
                            if (overlay) {
                                overlay.style.opacity = '1';
                                overlay.style.transform = 'scale(1)';
                            }
                        });
                    }
                }
            } else {
                // Cuando el video sale de pantalla
                if (video && !video.paused) {
                    video.pause();
                }
                // NO mostramos el botón aquí para que no se vea al volver a entrar
                // Se queda "limpio" hasta que se decida lo contrario
            }
        });
    }, { root: scroller, threshold: 0.5 }); // Reducido threshold para activar antes

    document.querySelectorAll('.video-section').forEach(section => observer.observe(section));


    // 2. FUNCIÓN MUTE (FIX: Detener propagación + Estado global)
    function toggleMute(btn, event) {
        // Detenemos el clic para que no pause el video
        if (event) {
            event.preventDefault();
            event.stopPropagation();
        }

        const section = btn.closest('.video-section');
        if (!section) return;

        const video = section.querySelector('video');
        if (!video) return;

        // Cambiar estado global
        globalMuteState = !globalMuteState;
        
        // Aplicar a todos los videos
        document.querySelectorAll('.video-section video').forEach(v => {
            v.muted = globalMuteState;
        });
        
        // Actualizar todos los botones
        updateAllMuteButtons();
    }


    // 3. PLAY/PAUSE AL TOCAR LA PANTALLA (Gestión manual)
    document.querySelectorAll('.video-section').forEach(section => {
        section.addEventListener('click', (e) => {

            // Seguridad: Si toca Mute o Like, no hacemos nada
            if (e.target.closest('.mute-toggle') || e.target.closest('.like-btn')) return;

            const video = section.querySelector('video');
            const overlay = section.querySelector('.play-overlay');

            if (video.paused) {
                video.play();
                // Ocultar icono
                overlay.style.opacity = '0';
                overlay.style.transform = 'scale(1.5)';
            } else {
                video.pause();
                // Mostrar icono
                overlay.style.opacity = '1';
                overlay.style.transform = 'scale(1)';
            }
        });
    });

    // 5. FUNCIÓN DE LIKES CON LOCALSTORAGE
    function getLikedVideos() {
        try {
            const liked = localStorage.getItem('aether-shorts-likes');
            return liked ? JSON.parse(liked) : [];
        } catch (e) {
            console.warn('Error al leer likes:', e);
            return [];
        }
    }

    function saveLikedVideos(likedArray) {
        try {
            localStorage.setItem('aether-shorts-likes', JSON.stringify(likedArray));
        } catch (e) {
            console.warn('Error al guardar likes:', e);
        }
    }

    function toggleLike(btn, event) {
        if (event) {
            event.preventDefault();
            event.stopPropagation();
        }

        const videoId = btn.getAttribute('data-video-id');
        if (!videoId) return;

        // Если уже лайкнуто, ничего не делать
        if (btn.disabled || btn.classList.contains('liked')) {
            return;
        }

        const likedVideos = getLikedVideos();
        const isLiked = likedVideos.includes(videoId);

        // Если уже есть в localStorage, ничего не делать
        if (isLiked) {
            btn.classList.add('liked');
            btn.disabled = true;
            return;
        }

        const baseLikes = parseInt(btn.getAttribute('data-base-likes') || '0');
        const countElement = btn.querySelector('.like-count-num');

        // Анимация
        btn.classList.add('animating');
        setTimeout(() => {
            btn.classList.remove('animating');
        }, 600);

        // Добавить лайк (только один раз)
        likedVideos.push(videoId);
        btn.classList.add('liked');
        btn.disabled = true;
        const newCount = baseLikes + 1;

        saveLikedVideos(likedVideos);

        // Обновить счетчик
        if (countElement) {
            countElement.textContent = String(newCount);
        }
    }

    // Инициализация лайков при загрузке
    function initLikes() {
        const likedVideos = getLikedVideos();
        document.querySelectorAll('.like-btn').forEach(btn => {
            const videoId = btn.getAttribute('data-video-id');
            const baseLikes = parseInt(btn.getAttribute('data-base-likes') || '0');
            const countElement = btn.querySelector('.like-count-num');
            const isLiked = likedVideos.includes(videoId);
            
            if (isLiked) {
                // Видео уже лайкнуто - заблокировать кнопку
                btn.classList.add('liked');
                btn.disabled = true;
                if (countElement) {
                    countElement.textContent = String(baseLikes + 1);
                }
            } else {
                // Видео не лайкнуто - показать базовое значение
                btn.disabled = false;
                if (countElement) {
                    countElement.textContent = String(baseLikes);
                }
            }
        });
    }

    // Инициализировать лайки после загрузки DOM
    initLikes();

    // ==========================================
    // SISTEMA DE COMENTARIOS (LOCALSTORAGE)
    // ==========================================

    const defaultComments = {
            short1: [
                { name: 'dani_perez89', text: 'Pfff, ese crujido del principio es la auténtica vida. Tremendo track.' },
                { name: 'wax_digger', text: '¿Alguien sabe el Track ID de esto por favor? 🙏 ' },
                { name: 'Laura V.', text: 'Los graves en formato físico te pegan diferente en el pecho. Qué locura.' }
            ],
            short2: [
                { name: 'ruben.dj', text: 'Menuda joya, ¿de qué año es ese prensaje? Suena impecable.' },
                { name: 'carmen_garcia', text: 'No hay nada como el ritual de sacar el disco de la funda y poner la aguja ✨' },
                { name: 'needle_drop', text: 'Qué cápsula estás usando ahí? Saca unos agudos súper nítidos.' },
                { name: 'Javi', text: 'Esa línea de bajo me acaba de arreglar el martes 🤯' }
            ],
            short3: [
                { name: 'Sr_Martinez', text: 'El vinilo no perdona una, pero cuando está bien grabado es otra liga en sonido.' },
                { name: 'beatjunkie_es', text: 'Temazo absoluto. Ideal para cerrar cualquier sesión a altas horas.' },
                { name: 'Cris.T', text: '¿Lo tienes a 33 o le has bajado el pitch? Suena lentísimo pero me flipa el rollo que coge.' }
            ],
            short4: [
                { name: 'mario_vynil', text: 'Dónde has pillado esa copia? En Discogs los precios de este están intocables 🥲' },
                { name: 'Bea', text: 'El rango dinámico que tiene esta grabación... madre mía. Se escuchan todos los detalles.' },
                { name: 'wax.and.soul', text: 'Tremenda selección, como siempre descubriendo oro por aquí 🫡' },
                { name: 'Lau_88', text: 'Esto puesto en unos buenos monitores en casa tiene que ser una maravilla.' },
                { name: 'the_crate_digger', text: 'Ese polvillo en el surco es parte del encanto jajaja. Musicón.' }
            ],
            short5: [
                { name: 'alexis_m', text: 'Qué buen gusto tienes para elegir la música. Fluyendo al 100%.' },
                { name: 'discofiebre', text: 'Wow, me acabo de transportar directamente a los 90 con este bombo 🪩' },
                { name: 'Pablo D.', text: 'Imposible conseguir esa textura tan cruda con digital. Disfrútalo mucho!' }
            ],
            short6: [
                { name: 'under_the_needle', text: 'Ojo a cómo separa los instrumentos ese equipo. Brutal.' },
                { name: 'Miquel_92', text: 'Me lo guardo, a ver si hay suerte y lo encuentro en alguna tienda de segunda mano.' },
                { name: 'sonido.crudo', text: 'Ese bombo suena gordísimo. Puro músculo analógico 🔥' }
            ]
        };

    function getMyCommentIds(videoId) {
        try {
            const stored = localStorage.getItem(`aether-shorts-my-comment-ids-${videoId}`);
            return stored ? JSON.parse(stored) : [];
        } catch (e) {
            return [];
        }
    }

    function saveMyCommentIds(videoId, ids) {
        try {
            localStorage.setItem(`aether-shorts-my-comment-ids-${videoId}`, JSON.stringify(ids));
        } catch (e) {
            console.warn('Error al guardar mis IDs de comentarios:', e);
        }
    }

    function getComments(videoId) {
        try {
            const stored = localStorage.getItem(`aether-shorts-comments-${videoId}`);
            if (stored) {
                const parsed = JSON.parse(stored);
                const defaults = defaultComments[videoId] || [];
                const combined = [...defaults];
                parsed.forEach(comment => {
                    if (!defaults.some(c => c.name === comment.name && c.text === comment.text)) {
                        combined.push(comment);
                    }
                });
                return combined;
            }
            return defaultComments[videoId] || [];
        } catch (e) {
            console.warn('Error al leer comentarios:', e);
            return defaultComments[videoId] || [];
        }
    }

    function saveComments(videoId, userComments) {
        try {
            localStorage.setItem(`aether-shorts-comments-${videoId}`, JSON.stringify(userComments));
        } catch (e) {
            console.warn('Error al guardar comentarios:', e);
        }
    }

    function updateCommentsCount(videoId, totalComments) {
        const countNumEl = document.querySelector(`.comments-toggle[data-video-id="${videoId}"] .comment-count-num`);
        if (!countNumEl) return;
        countNumEl.textContent = String(totalComments);
    }

    function renderComments(videoId) {
        const commentsList = document.getElementById(`comments-list-${videoId}`);
        if (!commentsList) return;
        const comments = getComments(videoId);
        updateCommentsCount(videoId, comments.length);
        const myIds = getMyCommentIds(videoId);
        commentsList.innerHTML = '';
        if (comments.length === 0) {
            commentsList.innerHTML = '<p style="color: rgba(255,255,255,0.5); font-size: 0.8125rem; text-align: center; padding: 1rem;">Sé el primero en comentar</p>';
            return;
        }
        comments.forEach(comment => {
            const commentEl = document.createElement('div');
            commentEl.className = 'comment-item';
            const canDelete = comment.id && myIds.includes(comment.id);
            const deleteBtn = canDelete
                ? `<button type="button" class="comment-delete" data-video-id="${escapeHtml(videoId)}" data-comment-id="${escapeHtml(comment.id)}" onclick="deleteComment(this, event)" aria-label="Borrar mi comentario"><i data-lucide="trash-2" class="w-3.5 h-3.5"></i></button>`
                : '';
            commentEl.innerHTML = `<div class="comment-item-content"><div class="comment-author">${escapeHtml(comment.name)}</div><div class="comment-text">${escapeHtml(comment.text)}</div></div>${deleteBtn}`;
            commentsList.appendChild(commentEl);
        });
        if (typeof lucide !== 'undefined') lucide.createIcons();
    }

    function escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }


    // Hacer funciones globales para que onclick las encuentre
    window.toggleComments = function(videoId, event) {
        if (event) {
            event.preventDefault();
            event.stopPropagation();
        }
        const commentsSection = document.getElementById(`comments-${videoId}`);
        if (!commentsSection) return;
        const isShowing = commentsSection.classList.contains('show');
        document.querySelectorAll('.comments-section.show').forEach(section => {
            if (section.id !== `comments-${videoId}`) section.classList.remove('show');
        });
        if (isShowing) {
            commentsSection.classList.remove('show');
        } else {
            commentsSection.classList.add('show');
            renderComments(videoId);
        }
        if (typeof lucide !== 'undefined') lucide.createIcons();
    };

    window.addComment = async function(videoId, event) {
        event.preventDefault();
        const form = event.target;
        const submitBtn = form ? form.querySelector('.comment-submit') : null;
        if (submitBtn && submitBtn.classList.contains('is-loading')) return;

        const nameInput = document.getElementById(`comment-name-${videoId}`);
        const textInput = document.getElementById(`comment-text-${videoId}`);
        if (!nameInput || !textInput) return;
        const name = nameInput.value.trim();
        const text = textInput.value.trim();
        if (!name || !text) return;

        if (submitBtn) submitBtn.classList.add('is-loading');
        nameInput.disabled = true;
        textInput.disabled = true;

        try {
            // Небольшая имитация отправки для визуального фидбека
            await new Promise(resolve => setTimeout(resolve, 550));

            let savedComments = [];
            try {
                const stored = localStorage.getItem(`aether-shorts-comments-${videoId}`);
                if (stored) {
                    savedComments = JSON.parse(stored);
                }
            } catch (e) {
                console.warn('Error al leer comentarios:', e);
            }

            const id = 'id_' + Date.now() + '_' + Math.random().toString(36).slice(2, 9);
            savedComments.push({ id, name, text });
            saveComments(videoId, savedComments);

            const myIds = getMyCommentIds(videoId);
            myIds.push(id);
            saveMyCommentIds(videoId, myIds);

            nameInput.value = '';
            textInput.value = '';
            renderComments(videoId);
            if (typeof lucide !== 'undefined') lucide.createIcons();
        } finally {
            if (submitBtn) submitBtn.classList.remove('is-loading');
            nameInput.disabled = false;
            textInput.disabled = false;
            nameInput.focus();
        }
    };

    window.deleteComment = function(btn, event) {
        if (event) {
            event.preventDefault();
            event.stopPropagation();
        }
        const videoId = btn.getAttribute('data-video-id');
        const commentId = btn.getAttribute('data-comment-id');
        if (!videoId || !commentId) return;
        
        let savedComments = [];
        try {
            const stored = localStorage.getItem(`aether-shorts-comments-${videoId}`);
            if (stored) savedComments = JSON.parse(stored);
        } catch (e) {
            console.warn('Error al leer comentarios:', e);
        }
        savedComments = savedComments.filter(c => c.id !== commentId);
        saveComments(videoId, savedComments);
        
        let myIds = getMyCommentIds(videoId).filter(id => id !== commentId);
        saveMyCommentIds(videoId, myIds);
        
        renderComments(videoId);
        if (typeof lucide !== 'undefined') lucide.createIcons();
    };

    function initComments() {
        ['short1', 'short2', 'short3', 'short4', 'short5', 'short6'].forEach(videoId => renderComments(videoId));
    }

    initComments();

    // Asegurar que los iconos Lucide se dibujen al final
    if (typeof lucide !== 'undefined') {
        lucide.createIcons();
    }

    // 4. CONTROL DE TECLADO (FLECHAS)
    document.addEventListener('keydown', (e) => {
        if (!scroller) return;

        const height = scroller.clientHeight;

        if (e.key === 'ArrowDown') {
            e.preventDefault();
            scroller.scrollBy({ top: height, behavior: 'smooth' });
        }
        else if (e.key === 'ArrowUp') {
            e.preventDefault();
            scroller.scrollBy({ top: -height, behavior: 'smooth' });
        }
        else if (e.key === ' ' || e.key === 'Spacebar') {
            e.preventDefault();
            togglePlayActiveVideo();
        }
        else if (e.key === 'Escape') {
            // Pausar todos los videos al presionar Escape
            document.querySelectorAll('.video-section video').forEach(video => {
                if (video && !video.paused) {
                    video.pause();
                }
            });
        }
    });

    function togglePlayActiveVideo() {
        const videos = document.querySelectorAll('.video-section');
        videos.forEach(sec => {
            const rect = sec.getBoundingClientRect();
            if (rect.top >= 0 && rect.top < window.innerHeight) {
                sec.click();
            }
        });
    }

    // Sin prefetch - los videos solo se cargan cuando entran en viewport
    // Esto ahorra ancho de banda y mejora el rendimiento inicial

    // Última pasada de iconos por si hay elementos dinámicos
    setTimeout(function() {
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }
    }, 100);
</script>
</body>

</html>